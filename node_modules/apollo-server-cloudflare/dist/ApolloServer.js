"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ApolloServer = void 0;
const cloudflareApollo_1 = require("./cloudflareApollo");
const apollo_server_core_1 = require("apollo-server-core");
var apollo_server_core_2 = require("apollo-server-core");
class ApolloServer extends apollo_server_core_1.ApolloServerBase {
    async createGraphQLServerOptions(request) {
        return super.graphQLServerOptions({ request });
    }
    async listen() {
        this.assertStarted('listen');
        addEventListener('fetch', (event) => {
            event.respondWith((0, cloudflareApollo_1.graphqlCloudflare)(() => {
                return this.createGraphQLServerOptions(event.request);
            }, this.csrfPreventionRequestHeaders)(event.request));
        });
        return await { url: '', port: null };
    }
}
exports.ApolloServer = ApolloServer;
//# sourceMappingURL=ApolloServer.js.map